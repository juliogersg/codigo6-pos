(this["webpackJsonpreact-punto-de-venta"]=this["webpackJsonpreact-punto-de-venta"]||[]).push([[0],{123:function(e,t,a){},125:function(e,t,a){},126:function(e,t,a){},205:function(e,t,a){"use strict";a.r(t);var c=a(2),n=a(23),s=a.n(n),r=a(12),i=a(14),o=(a(123),a(124),a(125),a(126),a(11)),l=a.n(o),j=a(17),d=a(8),b=a(76),u=a(9),m=Object(c.createContext)(),O=a(215),h=a(18),p=a.n(h),x="https://codigo4-pos.herokuapp.com",f=function(){var e=Object(j.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("".concat(x,"/pedido"),JSON.stringify(t),{headers:{"Content-type":"application/json"}});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(j.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("".concat(x,"/pedido"));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=Object(c.createContext)(),_=a(3),g=function(e){var t=Object(c.useState)(null),a=Object(u.a)(t,2),n=a[0],s=a[1],r=Object(c.useState)(null),i=Object(u.a)(r,2),o=i[0],h=i[1],p=Object(c.useState)([]),x=Object(u.a)(p,2),v=x[0],g=x[1],C=Object(c.useContext)(N).usu_id,y=function(){var e=Object(j.a)(l.a.mark((function e(){var t,a,c,r,i,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Date,a=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds(),c=v.find((function(e){return n.mesa_id===e.mesa_id})),r=c.platos.map((function(e){return{plato_id:e.plato_id,pedidoplato_cant:e.plato_cant}})),i={pedido_fech:a,pedido_nro:Object(O.a)(),pedido_est:"pagado",usu_id:C,mesa_id:n.mesa_id,pedidoplatos:r},console.log(i),e.next=8,f(i);case 8:if(!e.sent.data.ok){e.next=14;break}return o=v.filter((function(e){return e.mesa_id!==n.mesa_id})),g(Object(b.a)(o)),s(null),e.abrupt("return",!0);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(_.jsx)(m.Provider,{value:{pagarContext:y,objMesaGlobal:n,objCategoriaGlobal:o,pedidos:v,setObjMesaGlobal:s,setObjCategoriaGlobal:h,modificarPlatoContext:function(e,t){var a=Object(b.a)(v);if(n){var c=a.find((function(e){return n.mesa_id===e.mesa_id}));if(c){var s=c.platos.findIndex((function(t){return t.plato_id===e.plato_id}));s>=0?"sumar"===t?(c.platos[s].plato_cant++,g(a)):c.platos[s].plato_cant>1?(c.platos[s].plato_cant--,g(a)):(c.platos.splice(s,1),0===c.platos.length&&(a=a.filter((function(e){return e.mesa_id!==n.mesa_id}))),g(a)):"sumar"===t&&(c.platos.push(Object(d.a)(Object(d.a)({},e),{},{plato_cant:1})),g(a))}else"sumar"===t&&(a.push({usu_id:0,mesa_id:n.mesa_id,pedido_est:"pendiente",platos:[Object(d.a)(Object(d.a)({},e),{},{plato_cant:1})]}),g(a))}}},children:e.children})},C=function(){var e=Object(c.useContext)(N),t=e.usu_nom,a=e.cerrarSesion;return Object(_.jsxs)("header",{className:"header",children:[Object(_.jsx)("div",{className:"header__logo",children:Object(_.jsx)("img",{src:"/imagenes/logo.svg",alt:""})}),Object(_.jsxs)("div",{className:"header__buscador",children:[Object(_.jsx)("img",{src:"/imagenes/search.svg",alt:""}),Object(_.jsx)("input",{type:"text",className:"header__input",placeholder:"Busca un t\xe9rmino"})]}),Object(_.jsxs)("div",{className:"header__usuario",children:[Object(_.jsx)("img",{src:"https://randomuser.me/api/portraits/men/90.jpg",alt:""}),Object(_.jsx)("span",{children:t}),Object(_.jsx)("button",{className:"btn btn-danger",onClick:function(){a()},children:"Cerrar Sesi\xf3n"})]})]})},y=a(212),S=a(111),w=a.n(S),k=function(e){var t=e.mostrar,a=e.setMostrar,n=Object(c.useContext)(m),s=n.pedidos,r=n.objMesaGlobal,i=n.pagarContext,o=s.find((function(e){return e.mesa_id===(null===r||void 0===r?void 0:r.mesa_id)})),l=Object(c.useRef)();return o?Object(_.jsxs)(y.a,{show:t,onHide:function(){a(!1)},size:"xl",children:[Object(_.jsx)(y.a.Header,{closeButton:!0,children:Object(_.jsx)(y.a.Title,{children:"Boleta"})}),Object(_.jsx)(y.a.Body,{children:Object(_.jsx)("div",{className:"container",ref:l,children:Object(_.jsx)("div",{className:"col-md-12",children:Object(_.jsxs)("div",{className:"invoice",children:[Object(_.jsx)("div",{className:"invoice-company text-inverse f-w-600",children:"Company Name, Inc"}),Object(_.jsxs)("div",{className:"invoice-header",children:[Object(_.jsxs)("div",{className:"invoice-from",children:[Object(_.jsx)("small",{children:"from"}),Object(_.jsxs)("address",{className:"m-t-5 m-b-5",children:[Object(_.jsx)("strong",{className:"text-inverse",children:"Twitter, Inc."}),Object(_.jsx)("br",{}),"Street Address",Object(_.jsx)("br",{}),"City, Zip Code",Object(_.jsx)("br",{}),"Phone: (123) 456-7890",Object(_.jsx)("br",{}),"Fax: (123) 456-7890"]})]}),Object(_.jsxs)("div",{className:"invoice-to",children:[Object(_.jsx)("small",{children:"to"}),Object(_.jsxs)("address",{className:"m-t-5 m-b-5",children:[Object(_.jsx)("strong",{className:"text-inverse",children:"Company Name"}),Object(_.jsx)("br",{}),"Street Address",Object(_.jsx)("br",{}),"City, Zip Code",Object(_.jsx)("br",{}),"Phone: (123) 456-7890",Object(_.jsx)("br",{}),"Fax: (123) 456-7890"]})]}),Object(_.jsxs)("div",{className:"invoice-date",children:[Object(_.jsx)("small",{children:"Invoice / July period"}),Object(_.jsx)("div",{className:"date text-inverse m-t-5",children:"August 3,2012"}),Object(_.jsxs)("div",{className:"invoice-detail",children:["#0000123DSS",Object(_.jsx)("br",{}),"Services Product"]})]})]}),Object(_.jsxs)("div",{className:"invoice-content",children:[Object(_.jsx)("div",{className:"table-responsive",children:Object(_.jsxs)("table",{className:"table table-invoice",children:[Object(_.jsx)("thead",{children:Object(_.jsxs)("tr",{children:[Object(_.jsx)("th",{children:"#"}),Object(_.jsx)("th",{children:"Cant."}),Object(_.jsx)("th",{children:"Descripci\xf3n"}),Object(_.jsx)("th",{children:"P.Unitario"}),Object(_.jsx)("th",{children:"P.Total"})]})}),Object(_.jsx)("tbody",{children:o.platos.map((function(e,t){return Object(_.jsxs)("tr",{children:[Object(_.jsx)("td",{children:t+1}),Object(_.jsx)("td",{children:e.plato_cant}),Object(_.jsx)("td",{children:e.plato_nom}),Object(_.jsxs)("td",{children:["S/ ",e.plato_pre]}),Object(_.jsxs)("td",{children:["S/ ",+e.plato_pre*+e.plato_cant]})]},e.plato_id)}))})]})}),Object(_.jsxs)("div",{className:"invoice-price",children:[Object(_.jsx)("div",{className:"invoice-price-left",children:Object(_.jsxs)("div",{className:"invoice-price-row",children:[Object(_.jsxs)("div",{className:"sub-price",children:[Object(_.jsx)("small",{children:"SUBTOTAL"}),Object(_.jsx)("span",{className:"text-inverse",children:"$4,500.00"})]}),Object(_.jsx)("div",{className:"sub-price",children:Object(_.jsx)("i",{className:"fa fa-plus text-muted"})}),Object(_.jsxs)("div",{className:"sub-price",children:[Object(_.jsx)("small",{children:"PAYPAL FEE (5.4%)"}),Object(_.jsx)("span",{className:"text-inverse",children:"$108.00"})]})]})}),Object(_.jsxs)("div",{className:"invoice-price-right",children:[Object(_.jsx)("small",{children:"TOTAL"})," ",Object(_.jsx)("span",{className:"f-w-600",children:"$4508.00"})]})]})]}),Object(_.jsxs)("div",{className:"invoice-note",children:["* Make all cheques payable to [Your Company Name]",Object(_.jsx)("br",{}),"* Payment is due within 30 days",Object(_.jsx)("br",{}),"* If you have any questions concerning this invoice, contact  [Name, Phone Number, Email]"]}),Object(_.jsxs)("div",{className:"invoice-footer",children:[Object(_.jsx)("p",{className:"text-center m-b-5 f-w-600",children:"THANK YOU FOR YOUR BUSINESS"}),Object(_.jsxs)("p",{className:"text-center",children:[Object(_.jsxs)("span",{className:"m-r-10",children:[Object(_.jsx)("i",{className:"fa fa-fw fa-lg fa-globe"})," matiasgallipoli.com"]}),Object(_.jsxs)("span",{className:"m-r-10",children:[Object(_.jsx)("i",{className:"fa fa-fw fa-lg fa-phone-volume"})," T:016-18192302"]}),Object(_.jsxs)("span",{className:"m-r-10",children:[Object(_.jsx)("i",{className:"fa fa-fw fa-lg fa-envelope"})," rtiemps@gmail.com"]})]})]})]})})})}),Object(_.jsxs)(y.a.Footer,{children:[Object(_.jsx)("button",{className:"btn btn-success btn-lg",onClick:function(){i().then((function(e){e&&a(!1)}))},children:"PAGAR"}),Object(_.jsx)(w.a,{trigger:function(){return Object(_.jsx)("button",{className:"btn btn-primary btn-lg",children:"Imprimir"})},content:function(){return l.current}})]})]}):null},M=function(e){var t=e.objItem;return Object(_.jsxs)("li",{className:"comanda__item",children:[Object(_.jsxs)("p",{className:"comanda__nombre",children:[Object(_.jsx)("span",{children:Object(_.jsx)("strong",{children:t.plato_nom})}),Object(_.jsxs)("span",{children:["Precio: S/ ",t.plato_pre]})]}),Object(_.jsx)("p",{className:"comanda__cantidad",children:t.plato_cant}),Object(_.jsx)("p",{className:"comanda__precio",children:Object(_.jsxs)("strong",{children:["S/ ",t.plato_cant*+t.plato_pre]})})]})},E=function(){var e=Object(c.useContext)(m),t=e.pedidos,a=e.objMesaGlobal,n=Object(c.useState)(!1),s=Object(u.a)(n,2),r=s[0],i=s[1],o=[];if(a){var l=t.find((function(e){return e.mesa_id===a.mesa_id}));l&&(o=l.platos)}return Object(_.jsxs)("div",{className:"boleta",children:[Object(_.jsxs)("h3",{children:["Pedido Mesa: \xa0",Object(_.jsx)("span",{className:"color-secundario",children:a?a.mesa_nro:"Seleccione"})]}),Object(_.jsx)("hr",{}),Object(_.jsxs)("div",{className:"comanda",children:[Object(_.jsx)("h4",{className:"comanda__mesa",children:a?"Mesa "+a.mesa_nro:"Seleccione"}),Object(_.jsx)("p",{className:"comanda__usuario",children:"Carlos Jimenez"}),Object(_.jsx)("hr",{}),Object(_.jsx)("ul",{className:"comanda__lista",children:o.map((function(e){return Object(_.jsx)(M,{objItem:e},e.plato_id)}))}),Object(_.jsx)("button",{className:"boton boton-success boton-block",onClick:function(){i(!0)},children:"PAGAR"})]}),Object(_.jsx)(k,{mostrar:r,setMostrar:i})]})},P=function(){var e=Object(j.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("".concat(x,"/categoria"));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(j.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("".concat(x,"/categoria/").concat(t,"/platos"));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(e){var t=e.objCategoria,a=Object(c.useContext)(m),n=a.objCategoriaGlobal,s=a.setObjCategoriaGlobal;return Object(_.jsxs)("li",{className:t.categoria_id===(null===n||void 0===n?void 0:n.categoria_id)?"active":"",onClick:function(){s(Object(d.a)({},t))},children:[Object(_.jsx)("img",{src:"/imagenes/plato_blanco.svg",alt:""}),Object(_.jsx)("span",{children:t.categoria_nom})]})},A=function(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),a=t[0],n=t[1];return Object(c.useEffect)((function(){P().then((function(e){e.data.ok&&n(e.data.content)}))}),[]),Object(_.jsx)("nav",{className:"menu",children:Object(_.jsx)("ul",{className:"menu__lista",children:a.map((function(e){return Object(_.jsx)(F,{objCategoria:e},e.categoria_id)}))})})},R=function(){var e=Object(j.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("".concat(x,"/mesa"));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(j.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.put("".concat(x,"/mesa/").concat(t.mesa_id),JSON.stringify(t),{headers:{"Content-type":"application/json"}});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(j.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=p.a.post("".concat(x,"/mesa"),JSON.stringify(t),{headers:{"Content-type":"application/json"}}),e.abrupt("return",a);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(j.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.delete("".concat(x,"/mesa/").concat(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(e){var t=e.objMesa,a=Object(c.useContext)(m),n=a.objMesaGlobal,s=a.setObjMesaGlobal;return Object(_.jsxs)("li",{className:"mesas__mesa ".concat((null===n||void 0===n?void 0:n.mesa_id)===t.mesa_id?"activo":""),onClick:function(){s(Object(d.a)({},t))},children:[Object(_.jsx)("span",{className:"mesas__titulo",children:"Mesa"}),Object(_.jsx)("span",{className:"mesas__numero",children:t.mesa_nro})]})},J=function(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),a=t[0],n=t[1];return Object(c.useEffect)((function(){R().then((function(e){e.data.ok&&n(e.data.content)}))}),[]),Object(_.jsxs)("div",{className:"mesas",children:[Object(_.jsx)("ul",{className:"mesas__lista",children:a.map((function(e){return Object(_.jsx)(D,{objMesa:e},e.mesa_id)}))}),Object(_.jsx)("div",{className:"mesas__info"})]})},H=function(e){var t=e.objPlato,a=Object(c.useContext)(m).modificarPlatoContext;return Object(_.jsxs)("div",{className:"carta__plato",children:[Object(_.jsx)("img",{src:t.plato_img,alt:""}),Object(_.jsx)("h4",{className:"carta__titulo",children:t.plato_nom}),Object(_.jsxs)("span",{className:"carta__precio",children:["S/ ",(+t.plato_pre).toFixed(2)]}),Object(_.jsxs)("div",{className:"carta__botones",children:[Object(_.jsx)("button",{className:"boton boton-outline-primary boton-restar",onClick:function(){a(Object(d.a)({},t),"restar")},children:"-1"}),Object(_.jsx)("button",{className:"boton boton-outline-primary boton-sumar",onClick:function(){a(Object(d.a)({},t),"sumar")},children:"+1"})]})]})},U=function(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),a=t[0],n=t[1],s=Object(c.useContext)(m).objCategoriaGlobal;return Object(c.useEffect)((function(){s&&I(s.categoria_id).then((function(e){e.data.ok&&n(e.data.content.Platos)}))}),[s]),Object(_.jsxs)("div",{className:"carta",children:[Object(_.jsxs)("h3",{children:["Lista de Platos Categoria: \xa0",Object(_.jsx)("span",{className:"color-secundario",children:s?s.categoria_nom:"Seleccione una categor\xeda"})]}),Object(_.jsx)("div",{className:"carta__platos",children:a.map((function(e){return Object(_.jsx)(H,{objPlato:e},e.plato_id)}))})]})},L=function(){return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(C,{}),Object(_.jsxs)("main",{className:"pos-container",children:[Object(_.jsx)(A,{}),Object(_.jsxs)("section",{className:"tabla",children:[Object(_.jsx)(J,{}),Object(_.jsxs)("div",{className:"pedido",children:[Object(_.jsx)(U,{}),Object(_.jsx)(E,{})]})]})]})]})},z=function(){return Object(_.jsx)(g,{children:Object(_.jsx)(i.d,{children:Object(_.jsx)(i.b,{path:"/pos/terminal",children:Object(_.jsx)(L,{})})})})},Y=a(216),q=a(214),$=a(213),W=a(114),Z=a(211),K=function(){return Object(_.jsxs)(Y.a,{bg:"dark",variant:"dark",expand:"lg",children:[Object(_.jsx)(Y.a.Brand,{href:"#home",children:"React-Bootstrap"}),Object(_.jsx)(Y.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(_.jsxs)(Y.a.Collapse,{id:"basic-navbar-nav",children:[Object(_.jsxs)(q.a,{className:"mr-auto",children:[Object(_.jsx)(r.c,{to:"/admin",className:"nav-link",activeClassName:"active",exact:!0,children:"Dashboard"}),Object(_.jsx)(r.c,{to:"/admin/mesa",className:"nav-link",activeClassName:"active",exact:!0,children:"Mesas"}),Object(_.jsx)(r.c,{to:"/admin/plato",className:"nav-link",activeClassName:"active",exact:!0,children:"Platos"}),Object(_.jsx)(r.c,{to:"/admin/pedido",className:"nav-link",activeClassName:"active",exact:!0,children:"Pedidos"})]}),Object(_.jsxs)($.a,{inline:!0,children:[Object(_.jsx)(W.a,{type:"text",placeholder:"Search",className:"mr-sm-2"}),Object(_.jsx)(Z.a,{variant:"outline-success",children:"Search"})]})]})]})},V=a(115),Q=a.n(V),X=function(){var e=Object(c.useState)(0),t=Object(u.a)(e,2),a=t[0],n=t[1],s=Object(c.useState)(0),r=Object(u.a)(s,2),i=r[0],o=r[1],l=Object(c.useState)(0),j=Object(u.a)(l,2),d=j[0],b=j[1],m=Object(c.useState)(0),O=Object(u.a)(m,2),h=O[0],p=O[1];return Object(c.useEffect)((function(){var e=Q()(x);return e.on("reporte-dashboard",(function(e){var t=JSON.parse(e);n(t.totales.mesas),o(t.totales.pedidos),b(t.totales.categorias),p(t.total_caja.totalMoney)})),e.emit("peticion-reporte-dashboard"),function(){e.disconnect()}}),[]),Object(_.jsxs)("main",{className:"container",children:[Object(_.jsx)("div",{className:"row mt-4",children:Object(_.jsx)("div",{className:"col",children:Object(_.jsx)("h1",{className:"display-3 text-center",children:"Dashboard Administrativo"})})}),Object(_.jsxs)("div",{className:"row mt-4",children:[Object(_.jsx)("div",{className:"col md-4",children:Object(_.jsxs)("div",{className:"card shadow",children:[Object(_.jsx)("div",{className:"card-header",children:"Total de Mesas"}),Object(_.jsx)("div",{className:"card-body text-center",children:Object(_.jsx)("span",{className:"display-4",children:a})})]})}),Object(_.jsx)("div",{className:"col md-4",children:Object(_.jsxs)("div",{className:"card shadow",children:[Object(_.jsx)("div",{className:"card-header",children:"Total de Pedidos"}),Object(_.jsx)("div",{className:"card-body text-center",children:Object(_.jsx)("span",{className:"display-4",children:i})})]})}),Object(_.jsx)("div",{className:"col md-4",children:Object(_.jsxs)("div",{className:"card shadow",children:[Object(_.jsx)("div",{className:"card-header",children:"Total de Categorias"}),Object(_.jsx)("div",{className:"card-body text-center",children:Object(_.jsx)("span",{className:"display-4",children:d})})]})})]}),Object(_.jsx)("div",{className:"row mt-4",children:Object(_.jsx)("div",{className:"col",children:Object(_.jsxs)("div",{className:"card shadow",children:[Object(_.jsx)("div",{className:"card-header",children:"Total Ingresos"}),Object(_.jsx)("div",{className:"card-body text-center",children:Object(_.jsx)("p",{className:"display-1",children:Object(_.jsxs)("span",{children:["S/ ",h.toFixed(2)]})})})]})})})]})},ee=a(43),te=a(21),ae=function(e){var t=e.mostrarModalEditar,a=e.setMostrarModalEditar,n=e.objMesaEditar,s=e.traerMesas,r=Object(c.useState)(n),i=Object(u.a)(r,2),o=i[0],l=i[1],j=function(e){l(Object(d.a)(Object(d.a)({},o),{},Object(te.a)({},e.target.name,e.target.value)))};Object(c.useEffect)((function(){l(Object(d.a)({},n))}),[n]);return Object(_.jsxs)(y.a,{show:t,onHide:function(){a(!1)},size:"xl",children:[Object(_.jsx)(y.a.Header,{closeButton:!0,children:Object(_.jsx)(y.a.Title,{children:"Editar Mesa"})}),Object(_.jsx)(y.a.Body,{children:o?Object(_.jsxs)("form",{onSubmit:function(e){e.preventDefault(),T(o).then((function(e){e.data.ok&&(alert("Mesa editada correctamente"),a(!1),s())}))},children:[Object(_.jsxs)("div",{className:"form-group",children:[Object(_.jsx)("label",{htmlFor:"",children:"Id:"}),Object(_.jsx)("input",{type:"text",className:"form-control",value:o.mesa_id,disabled:!0})]}),Object(_.jsxs)("div",{className:"form-group",children:[Object(_.jsx)("label",{htmlFor:"",children:"Nro Mesa:"}),Object(_.jsx)("input",{type:"text",className:"form-control",value:o.mesa_nro,name:"mesa_nro",onChange:j})]}),Object(_.jsxs)("div",{className:"form-group",children:[Object(_.jsx)("label",{htmlFor:"",children:"Capacidad:"}),Object(_.jsx)("input",{type:"number",className:"form-control",value:o.mesa_cap,name:"mesa_cap",onChange:j})]}),Object(_.jsx)("div",{className:"form-group",children:Object(_.jsx)("button",{className:"btn btn-primary",type:"submit",children:"Guardar Cambios"})})]}):null})]})},ce={mesa_cap:"",mesa_nro:0},ne=function(e){var t=e.mostrarModalCrear,a=e.setMostrarModalCrear,n=e.traerMesas,s=Object(c.useState)(Object(d.a)({},ce)),r=Object(u.a)(s,2),i=r[0],o=r[1],l=function(e){o(Object(d.a)(Object(d.a)({},i),{},Object(te.a)({},e.target.name,e.target.value)))};return Object(_.jsxs)(y.a,{show:t,onHide:function(){a(!1)},size:"xl",children:[Object(_.jsx)(y.a.Header,{closeButton:!0,children:Object(_.jsx)(y.a.Title,{children:"Crear Mesa"})}),Object(_.jsx)(y.a.Body,{children:Object(_.jsxs)("form",{onSubmit:function(e){e.preventDefault(),B(i).then((function(e){e.data.ok&&(a(!1),o(ce),n())}))},children:[Object(_.jsxs)("div",{className:"form-group",children:[Object(_.jsx)("label",{htmlFor:"",children:"Nro Mesa:"}),Object(_.jsx)("input",{type:"text",className:"form-control",value:i.mesa_nro,name:"mesa_nro",onChange:l})]}),Object(_.jsxs)("div",{className:"form-group",children:[Object(_.jsx)("label",{htmlFor:"",children:"Capacidad:"}),Object(_.jsx)("input",{type:"number",className:"form-control",value:i.mesa_cap,name:"mesa_cap",onChange:l})]}),Object(_.jsx)("div",{className:"form-group",children:Object(_.jsx)("button",{className:"btn btn-primary",type:"submit",children:"Crea Mesa"})})]})})]})},se=a(75),re=a.n(se),ie=function(){var e=Object(c.useState)(!1),t=Object(u.a)(e,2),a=t[0],n=t[1],s=Object(c.useState)(!1),r=Object(u.a)(s,2),i=r[0],o=r[1],l=Object(c.useState)(!0),j=Object(u.a)(l,2),b=j[0],m=j[1],O=Object(c.useState)({columns:[{label:"#",field:"posicion"},{label:"Id",field:"mesa_id"},{label:"Nro Mesa",field:"mesa_nro"},{label:"Capacidad",field:"mesa_cap"},{label:"Acciones",field:"acciones"}],rows:[]}),h=Object(u.a)(O,2),p=h[0],x=h[1],f=Object(c.useState)(null),v=Object(u.a)(f,2),N=v[0],g=v[1],C=Object(c.useState)(!0),y=Object(u.a)(C,2),S=y[0],w=y[1],k=function(e){re.a.fire({title:"\xbfSeguro que deseas eliminar la mesa?",text:"Los cambios ser\xe1n irreversibles",showCancelButton:!0,icon:"error"}).then((function(t){t.isConfirmed&&G(e).then((function(e){e.data.ok&&(re.a.fire({text:"Mesa eliminada correctamente",icon:"success",timer:1500}),M())}))}))},M=function(){m(!0),R().then((function(e){if(e.data.ok){var t=e.data.content.map((function(e,t){return Object(d.a)(Object(d.a)({},e),{},{mesa_cap:e.mesa_cap+" personas",posicion:t+1,acciones:Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("button",{className:"btn btn-warning",onClick:function(){g(Object(d.a)({},e)),n(!0)},children:"Editar"}),Object(_.jsx)("button",{className:"btn btn-danger",onClick:function(){k(e.mesa_id)},children:"Eliminar"})]})})}));S&&(x(Object(d.a)(Object(d.a)({},p),{},{rows:t})),m(!1))}}))};return Object(c.useEffect)((function(){return M(),function(){w(!1)}}),[]),Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("main",{className:"container mt-5",children:Object(_.jsx)("div",{className:"row",children:Object(_.jsx)("div",{className:"col",children:Object(_.jsx)("div",{className:"card shadow",children:Object(_.jsxs)("div",{className:"card-body",children:[Object(_.jsx)("button",{className:"btn btn-primary",onClick:function(){o(!0)},children:"Crear Mesa"}),Object(_.jsx)("hr",{}),b?Object(_.jsx)("div",{className:"alert alert-info",children:"Cargando"}):Object(_.jsx)(ee.c,{data:p})]})})})})}),Object(_.jsx)(ae,{mostrarModalEditar:a,setMostrarModalEditar:n,objMesaEditar:N,traerMesas:M}),Object(_.jsx)(ne,{mostrarModalCrear:i,setMostrarModalCrear:o,traerMesas:M})]})},oe=function(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),a=(t[0],t[1],Object(c.useState)(!0)),n=Object(u.a)(a,2),s=n[0],r=n[1],i=Object(c.useState)({columns:[{label:"#",field:"posicion"},{label:"Id",field:"pedido_id"},{label:"Fecha",field:"pedido_fech"},{label:"Codigo",field:"pedido_nro"},{label:"Estado",field:"pedido_est"},{label:"Nro Mesa",field:"mesa_nro"},{label:"Usuario",field:"usu_nombre"},{label:"Acciones",field:"acciones"}],rows:[]}),o=Object(u.a)(i,2),l=o[0],j=o[1];return Object(c.useEffect)((function(){v().then((function(e){if(console.log(e.data.pedidos),e.data.ok){var t=e.data.pedidos.map((function(e,t){var a,c,n;return Object(d.a)(Object(d.a)({},e),{},{posicion:t+1,mesa_nro:(null===(a=e.Mesa)||void 0===a?void 0:a.mesa_nro)||"s/n",usu_nombre:((null===(c=e.Usuario)||void 0===c?void 0:c.usu_nom)||"")+" "+((null===(n=e.Usuario)||void 0===n?void 0:n.usu_ape)||""),acciones:Object(_.jsx)("button",{children:"Ver Detalles"})})}));console.log(t),j(Object(d.a)(Object(d.a)({},l),{},{rows:t})),r(!1)}else r(!1)})).catch((function(e){r(!1)}))}),[]),Object(_.jsxs)("main",{className:"container",children:[Object(_.jsx)("div",{className:"row",children:Object(_.jsx)("div",{className:"col",children:Object(_.jsx)("h1",{className:"display-4",children:"Lista de Pedidos"})})}),Object(_.jsx)("hr",{}),s?Object(_.jsx)("div",{className:"alert alert-info",children:Object(_.jsx)("h4",{children:"CARGANDO..."})}):Object(_.jsx)(ee.c,{data:l})]})},le=function(){var e=Object(j.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("".concat(x,"/plato"));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),je=function(){var e=Object(j.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("".concat(x,"/plato"),JSON.stringify(t),{headers:{"Content-type":"application/json"}});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),de=function(){var e=Object(j.a)(l.a.mark((function e(t,a){var c,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(c=new FormData).append("imagen",t),c.append("plato_id",a),e.next=5,p.a.post("".concat(x,"/plato/imagen/upload"),c,{headers:{"Content-type":"multipart/form-data"}});case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),be=function(){var e,t=Object(c.useState)({plato_nom:"",plato_img:"",plato_pre:0,categoria_id:0}),a=Object(u.a)(t,2),n=a[0],s=a[1],r=Object(c.useState)([]),i=Object(u.a)(r,2),o=i[0],l=i[1],j=Object(c.useRef)();Object(c.useEffect)((function(){P().then((function(e){e.data.ok&&l(e.data.content)}))}),[]);var b=function(e){s(Object(d.a)(Object(d.a)({},n),{},Object(te.a)({},e.target.name,e.target.value)))};return Object(_.jsx)("main",{className:"container mt-5",children:Object(_.jsx)("div",{className:"row",children:Object(_.jsx)("div",{className:"col",children:Object(_.jsxs)("div",{className:"card shadow",children:[Object(_.jsx)("div",{className:"card-header",children:Object(_.jsx)("h4",{children:"Formulario de Creaci\xf3n de un Plato"})}),Object(_.jsx)("div",{className:"card-body",children:Object(_.jsxs)("form",{onSubmit:function(e){e.preventDefault(),je(n).then((function(e){e.data.ok&&de(j.current.files[0],e.data.content.plato_id).then((function(e){console.log(e)}))}))},children:[Object(_.jsxs)("div",{className:"form-group",children:[Object(_.jsx)("label",{htmlFor:"",children:"Nombre:"}),Object(_.jsx)("input",{type:"text",className:"form-control",value:n.plato_nom,name:"plato_nom",onChange:b})]}),Object(_.jsxs)("div",{className:"form-group",children:[Object(_.jsx)("label",{htmlFor:"",children:"Precio:"}),Object(_.jsx)("input",{type:"number",className:"form-control",value:n.plato_pre,name:"plato_pre",onChange:b})]}),Object(_.jsxs)("div",{className:"form-group",children:[Object(_.jsx)("label",{htmlFor:"",children:"Categoria"}),Object(_.jsxs)("select",(e={name:"",className:"form-control",value:n.categoria_id},Object(te.a)(e,"name","categoria_id"),Object(te.a)(e,"onChange",b),Object(te.a)(e,"children",[Object(_.jsx)("option",{value:"0",children:"Seleccione"}),o.map((function(e,t){return Object(_.jsx)("option",{value:e.categoria_id,children:e.categoria_nom},t)}))]),e))]}),Object(_.jsxs)("div",{className:"form-group",children:[Object(_.jsx)("label",{htmlFor:"",children:"Imagen"}),Object(_.jsx)("input",{type:"file",ref:j,accept:"image/*"})]}),Object(_.jsx)("div",{className:"form-group",children:Object(_.jsx)("button",{className:"btn btn-primary",type:"submit",children:"Crear Plato"})})]})})]})})})})},ue={columns:[{label:"#",field:"posicion"},{label:"Id",field:"plato_id"},{label:"Nombre",field:"plato_nom"},{label:"Imagen",field:"plato_img"},{label:"Precio",field:"plato_pre"},{label:"Categoria",field:"categoria_nom"}],rows:[]},me=function(){var e=Object(c.useState)(!0),t=Object(u.a)(e,2),a=t[0],n=t[1],s=Object(c.useState)(ue),i=Object(u.a)(s,2),o=i[0],l=i[1];return Object(c.useEffect)((function(){var e=!0;return le().then((function(t){t.data.ok&&e&&(l(Object(d.a)(Object(d.a)({},ue),{},{rows:t.data.content.map((function(e,t){var a;return{posicion:t+1,plato_id:e.plato_id,plato_nom:e.plato_nom,plato_img:Object(_.jsx)("img",{src:e.plato_img,width:"100"}),plato_pre:"S/ ".concat((+e.plato_pre).toFixed(2)),categoria_nom:(null===(a=e.Categorium)||void 0===a?void 0:a.categoria_nom)||"Sin categoria"}}))})),n(!1))})),function(){e=!1}}),[]),Object(_.jsx)("main",{className:"container mt-5",children:Object(_.jsx)("div",{className:"row",children:Object(_.jsx)("div",{className:"col",children:Object(_.jsx)("div",{className:"card shadow",children:Object(_.jsxs)("div",{className:"card-body",children:[Object(_.jsx)(r.b,{className:"btn btn-primary",to:"/admin/plato/crear",children:"Crear Plato"}),Object(_.jsx)("hr",{}),a?Object(_.jsx)("div",{className:"alert alert-info",children:"Cargando"}):Object(_.jsx)(ee.c,{data:o,bordered:!0,hover:!0,striped:!0})]})})})})})},Oe=function(){return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(K,{}),Object(_.jsxs)(i.d,{children:[Object(_.jsx)(i.b,{path:"/admin/mesa",children:Object(_.jsx)(ie,{})}),Object(_.jsx)(i.b,{path:"/admin/plato/crear",children:Object(_.jsx)(be,{})}),Object(_.jsx)(i.b,{path:"/admin/plato",children:Object(_.jsx)(me,{})}),Object(_.jsx)(i.b,{path:"/admin/pedido",children:Object(_.jsx)(oe,{})}),Object(_.jsx)(i.b,{path:"/admin",exact:!0,children:Object(_.jsx)(X,{})})]})]})},he=function(){var e=Object(j.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("".concat(x,"/login"),JSON.stringify(t),{headers:{"Content-type":"application/json"}});case 2:return a=e.sent,console.log(a),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pe=function(){var e=Object(j.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("".concat(x,"/verificar"),null,{headers:{Authorization:"Bearer ".concat(t)}});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xe=Object(i.g)((function(e){var t=e.history,a=Object(c.useState)({correo:"",password:""}),n=Object(u.a)(a,2),s=n[0],r=n[1],i=Object(c.useContext)(N).iniciarSesionContext,o=function(e){r(Object(d.a)(Object(d.a)({},s),{},Object(te.a)({},e.target.name,e.target.value)))};return Object(_.jsx)("main",{className:"login",children:Object(_.jsxs)("div",{className:"login__form",children:[Object(_.jsx)("h1",{children:"Inicio de Sesi\xf3n"}),Object(_.jsxs)("form",{className:"formulario",onSubmit:function(e){e.preventDefault(),he(s).then((function(e){if(e.data.ok){i(e.data.token);var a=e.data.token.split(".")[1],c=atob(a);"admin"===JSON.parse(c).usu_tipo?t.push("/admin"):t.push("/pos/terminal")}}))},children:[Object(_.jsx)("label",{htmlFor:"",children:"Email:"}),Object(_.jsx)("input",{name:"correo",onChange:o,value:s.correo,type:"email",className:"formulario__input",placeholder:"Email"}),Object(_.jsx)("label",{htmlFor:"",children:"Password:"}),Object(_.jsx)("input",{name:"password",onChange:o,value:s.password,type:"password",className:"formulario__input",placeholder:"Password"}),Object(_.jsx)("button",{className:"formulario__submit",type:"submit",children:"Iniciar Sesi\xf3n"})]})]})})})),fe=function(){return Object(_.jsx)(i.d,{children:Object(_.jsx)(i.b,{path:"/auth/login",children:Object(_.jsx)(xe,{})})})},ve=function(e,t){return"INICIAR_SESION"===t.action?Object(d.a)({},t.data):"CERRAR_SESION"===t.action?(localStorage.removeItem("token"),{autenticado:!1,cargando:!1,usu_nom:null,token:null,usu_id:null,usu_tipo:null}):void 0},Ne={autenticado:!1,cargando:!0,token:null,usu_nom:null,usu_id:null,usu_tipo:null},_e=Object(i.g)((function(e){var t=Object(c.useReducer)(ve,Ne),a=Object(u.a)(t,2),n=a[0],s=a[1];console.log(e);var r=function(e){localStorage.setItem("token",e);var t=e.split(".")[1],a=atob(t),c=JSON.parse(a);s({action:"INICIAR_SESION",data:{autenticado:!0,cargando:!1,token:e,usu_nom:c.usu_nom,usu_id:c.usu_id,usu_tipo:c.usu_tipo}})};Object(c.useEffect)((function(){!function(){var e=localStorage.getItem("token");e?pe(e).then((function(t){t.data.ok&&r(e)})).catch((function(e){console.log(e),i()})):i()}()}),[]);var i=function(){s({action:"CERRAR_SESION"})};return Object(_.jsx)(N.Provider,{value:Object(d.a)({iniciarSesionContext:r,cerrarSesion:i},n),children:e.children})})),ge=function(e){var t=Object(c.useContext)(N),a=t.autenticado,n=t.cargando,s=t.usu_tipo;return n?Object(_.jsx)("div",{children:"Cargando joven..."}):a&&("admin"===s&&e.path.startsWith("/admin")||"ventas"===s&&e.path.startsWith("/pos"))?Object(_.jsx)(i.b,{path:e.path,children:e.children}):Object(_.jsx)(i.a,{to:"/"})},Ce=function(){return Object(_.jsx)("main",{className:"container-fluid",children:Object(_.jsxs)("div",{className:"row bg-dark justify-content-center align-items-center",style:{minHeight:"100vh"},children:[Object(_.jsx)("div",{className:"col-md-3",children:Object(_.jsx)(r.b,{to:"/admin",children:Object(_.jsx)("div",{className:"card p-5 bg-warning text-white",children:Object(_.jsx)("div",{className:"card-body",children:Object(_.jsx)("h4",{className:"display-4",children:"Admin"})})})})}),Object(_.jsx)("div",{className:"col-md-3",children:Object(_.jsx)(r.b,{to:"/pos/terminal",children:Object(_.jsx)("div",{className:"card p-5 bg-info text-white",children:Object(_.jsx)("div",{className:"card-body",children:Object(_.jsx)("h4",{className:"display-4",children:"Terminal POS"})})})})}),Object(_.jsx)("div",{className:"col-md-3",children:Object(_.jsx)(r.b,{to:"/auth/login",children:Object(_.jsx)("div",{className:"card p-5 bg-danger text-white",children:Object(_.jsx)("div",{className:"card-body",children:Object(_.jsx)("h4",{className:"display-4",children:"Login"})})})})})]})})},ye=function(){return Object(_.jsx)(i.d,{children:Object(_.jsx)(i.b,{path:"/",children:Object(_.jsx)(Ce,{})})})},Se=function(){return Object(_.jsx)(r.a,{children:Object(_.jsx)(_e,{children:Object(_.jsxs)(i.d,{children:[Object(_.jsx)(ge,{path:"/pos",children:Object(_.jsx)(z,{})}),Object(_.jsx)(ge,{path:"/admin",children:Object(_.jsx)(Oe,{})}),Object(_.jsx)(i.b,{path:"/auth",children:Object(_.jsx)(fe,{})}),Object(_.jsx)(i.b,{path:"/",exact:!0,children:Object(_.jsx)(ye,{})})]})})})};s.a.render(Object(_.jsx)(Se,{}),document.getElementById("root"))}},[[205,1,2]]]);
//# sourceMappingURL=main.6d3549fd.chunk.js.map